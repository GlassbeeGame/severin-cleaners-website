#!/bin/bash
# Auto-Backup Script for Severin Cleaners Website
# Run this every 30 minutes while working: watch -n 1800 ./auto-backup.sh

echo "ğŸ”„ Auto-Backup Starting..."

# Check if there are changes
if [[ -n $(git status -s) ]]; then
    echo "ğŸ“ Changes detected, creating backup commit..."

    # Add all changes
    git add -A

    # Create backup commit with timestamp
    TIMESTAMP=$(date '+%Y-%m-%d %H:%M:%S')
    git commit -m "AUTO-BACKUP: $TIMESTAMP

ğŸ“¦ Automatic backup commit
ğŸ¤– Generated by auto-backup.sh" || echo "âš ï¸  Nothing to commit or commit failed"

    # Push to GitHub
    echo "â˜ï¸  Pushing to GitHub..."
    git push origin master 2>&1 | grep -v "Everything up-to-date" || {
        echo "âš ï¸  Push failed - check your connection"
        exit 1
    }

    echo "âœ… Backup complete and pushed to GitHub!"
else
    echo "âœ¨ No changes to backup"
fi

echo "ğŸ“Š Last 3 commits:"
git log --oneline -3

echo ""
echo "ğŸ’¾ Your work is safe on GitHub master branch"
